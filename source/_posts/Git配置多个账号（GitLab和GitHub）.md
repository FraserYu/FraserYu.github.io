---
title: Gité…ç½®å¤šä¸ªè´¦å·ï¼ˆGitLabå’ŒGitHubï¼‰
tags:
  - Git
categories: [Coding, DevOps]
id: git-multiple-account
date: 2016-08-09 10:29:32
description: Gitå¤šè´¦å·ç®¡ç†è¯¦ç»†æ•™ç¨‹
keywords: Git,å¤šè´¦å·,Github,GitLab

---

### èƒŒæ™¯
ç°åœ¨å¥½å¤šå…¬å¸ç”¨GitLabä½œä¸ºé¡¹ç›®ç®¡ç†å·¥å…·ï¼Œè‡ªå·±ä¹Ÿä¼šæœ‰å¼€æºé¡¹ç›®åœ¨GitHubä¸Šï¼ŒæŒ‰ç…§ä»¥å¾€çš„é…ç½®å…¨å±€çš„ç”¨æˆ·è²Œä¼¼åœ¨è¿™ç§æƒ…å½¢ä¸‹å°±æ²¡æœ‰ä½œç”¨äº†ï¼ˆå…¬å¸çš„é¡¹ç›®éœ€è¦ç”¨å…¬å¸é‚®ç®±ï¼Œè‡ªå·±çš„é¡¹ç›®éœ€è¦ç”¨è‡ªå·±çš„é‚®ç®±ï¼‰ï¼Œæ­¤æ—¶å°±è¦åšGitå¤šè´¦æˆ·çš„ç®¡ç†ä¸è®¾ç½®ã€‚

### Gitæ”¯æŒçš„åè®®
Gitä¸»è¦æ”¯æŒå››ä¸­åè®®ï¼š file:// , git://,  http(s)://, ssh://, è¿™é‡Œä¸»è¦è¯´æ˜ä¸€ä¸‹http(s)å’Œsshåè®®çš„åŒºåˆ«ã€‚

#### https å’Œ SSH çš„åŒºåˆ«
> 1. å‰è€…å¯ä»¥éšæ„å…‹éš†githubä¸Šçš„é¡¹ç›®ï¼Œè€Œä¸ç®¡æ˜¯è°çš„ï¼›è€Œåè€…åˆ™æ˜¯ä½ å¿…é¡»æ˜¯ä½ è¦å…‹éš†çš„é¡¹ç›®çš„æ‹¥æœ‰è€…æˆ–ç®¡ç†å‘˜ï¼Œä¸”éœ€è¦å…ˆæ·»åŠ  SSH key (è¿™é‡Œå°±æ˜¯æ·»åŠ å…¬é’¥ï¼Œå–å¾—ç®¡ç†å‘˜çš„ä¿¡ä»»)ï¼Œå¦åˆ™æ— æ³•å…‹éš†ã€‚
> 2. https url åœ¨pushçš„æ—¶å€™æ˜¯éœ€è¦éªŒè¯ç”¨æˆ·åå’Œå¯†ç çš„ï¼Œè€Œ SSH åœ¨pushçš„æ—¶å€™ï¼Œæ˜¯ä¸éœ€è¦è¾“å…¥ç”¨æˆ·åçš„ï¼Œå¦‚æœé…ç½®SSH keyçš„æ—¶å€™è®¾ç½®äº†å¯†ç ï¼Œåˆ™éœ€è¦è¾“å…¥å¯†ç çš„ï¼Œå¦åˆ™ç›´æ¥æ˜¯ä¸éœ€è¦è¾“å…¥å¯†ç çš„ã€‚

<!-- more -->

### Gitè®¾ç½®å¤šè´¦æˆ·
#### æ£€æŸ¥æœ¬æœºæ˜¯å¦å·²æœ‰SSH Key

	$ cd ~/.ssh
	$ ls

å¦‚æœå­˜åœ¨ä¼šæœ‰ä¸¤ä¸ªç§˜é’¥æ–‡ä»¶id_rsa(ç§é’¥)å’Œid_rsa.pub(å…¬é’¥)ï¼Œå¦‚æœæ²¡æœ‰åˆ™éœ€è¦ä¸‹ä¸€æ­¥çš„åˆ›å»ºã€‚

#### åˆ›å»ºSSH Key
è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š

	$ ssh-keygen -t rsa -C "your_email@example.com"

å‚æ•°è§£æï¼š
> + -t æŒ‡å®šå¯†é’¥ç±»å‹ï¼Œé»˜è®¤æ˜¯ rsa ï¼Œå¯ä»¥çœç•¥ã€‚
> + -C è®¾ç½®æ³¨é‡Šæ–‡å­—ï¼Œæ¯”å¦‚é‚®ç®±ã€‚
> + -f æŒ‡å®šå¯†é’¥æ–‡ä»¶å­˜å‚¨æ–‡ä»¶åã€‚

ä»¥ä¸Šä»£ç çœç•¥äº† -f å‚æ•°ï¼Œå› æ­¤ï¼Œè¿è¡Œä¸Šé¢é‚£æ¡å‘½ä»¤åä¼šè®©ä½ è¾“å…¥ä¸€ä¸ªæ–‡ä»¶åï¼Œç”¨äºä¿å­˜åˆšæ‰ç”Ÿæˆçš„ SSH key ä»£ç ï¼Œå¦‚ï¼š

	Generating public/private rsa key pair.
	# Enter file in which to save the key (/c/Users/you/.ssh/id_rsa): [Press enter]

å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ä¸è¾“å…¥æ–‡ä»¶åï¼Œç›´æ¥è½¦ï¼Œä½¿ç”¨é»˜è®¤æ–‡ä»¶åï¼ˆæ¨èï¼‰ï¼Œé‚£ä¹ˆå°±ä¼šç”Ÿæˆ id_rsa å’Œ id_rsa.pub ä¸¤ä¸ªç§˜é’¥æ–‡ä»¶ã€‚

æ¥ç€åˆä¼šæç¤ºä½ è¾“å…¥ä¸¤æ¬¡å¯†ç ï¼ˆè¯¥å¯†ç æ˜¯ä½ pushæ–‡ä»¶çš„æ—¶å€™è¦è¾“å…¥çš„å¯†ç ï¼Œè€Œä¸æ˜¯githubç®¡ç†è€…çš„å¯†ç ï¼‰ï¼Œè¿™æ ·åˆ«äººç”¨ä½ çš„æœºå™¨æ²¡æœ‰å¯†ç æ˜¯ä¸å¯èƒ½éšä¾¿pushä»£ç çš„ï¼Œä¸€ç§å®‰å…¨æ€§çš„ä½“ç°ï¼Œå½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ä¸è¾“å…¥å¯†ç ï¼Œç›´æ¥æŒ‰å›è½¦ã€‚é‚£ä¹ˆpushçš„æ—¶å€™å°±ä¸éœ€è¦è¾“å…¥å¯†ç ï¼Œç›´æ¥æäº¤åˆ°githubä¸Šäº†ã€‚

	Enter passphrase (empty for no passphrase):
	# Enter same passphrase again:

åœ¨æ­¤æ¡ˆä¾‹ä¸­ï¼Œå°±éœ€è¦è¾“å…¥ä¸¤ä¸ªemailæ¥åˆ›å»ºä¸ªç›¸åº”çš„SSH Key:

	$ ssh-keygen -t rsa -C "personal@example.com" (ä¸ªäººé‚®ç®±)
	$ ssh-keygen -t rsa -C "company@example.com" (å…¬å¸é‚®ç®±)

æ­¤æ—¶åœ¨.ssh ç›®å½•ä¸‹åº”è¯¥ä¼šæœ‰ä¸‹é¢å››ä¸ªæ–‡ä»¶ï¼š

	id_rsa  id_rsa.pub  id_rsa_company  id_rsa_company.pub

å°†å…¬é’¥id_rsa.pubå’Œid_rsa_company.pub åˆ†åˆ«æ·»åŠ åˆ°GitHubå’ŒGitLabä¸Šï¼Œæ€æ ·æ·»åŠ è¯·è‡ªè¡ŒæŸ¥è¯¢ï¼Œè‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»æœ‰ä¸¤ä¸ªç”¨æˆ·ï¼ˆå¯ä»¥æ›´å¤šï¼‰ï¼Œæ€æ ·æŒ‡å®šè¦è¿æ¥GitHubè¿˜æ˜¯GitLabå‘¢ï¼Ÿè¿™æ ·å°±éœ€è¦è§£å†³å¤šç”¨æˆ·çš„æƒé™é—®é¢˜ã€‚

#### å¤šç”¨æˆ·æƒé™é—®é¢˜
GitHub/GitLabä½¿ç”¨SSHä¸å®¢æˆ·ç«¯è¿æ¥ã€‚å¦‚æœæ˜¯å•ç”¨æˆ·ï¼ˆAï¼‰ï¼Œç”Ÿæˆå¯†é’¥å¯¹åï¼Œå°†å…¬é’¥ä¿å­˜è‡³ GitHub/GitLabï¼Œæ¯æ¬¡è¿æ¥æ—¶SSHå®¢æˆ·ç«¯å‘é€æœ¬åœ°ç§é’¥ï¼ˆé»˜è®¤~/.ssh/id_rsaï¼‰åˆ°æœåŠ¡ç«¯éªŒè¯ã€‚å•ç”¨æˆ·æƒ…å†µä¸‹ï¼Œè¿æ¥çš„æœåŠ¡å™¨ä¸Šä¿å­˜çš„å…¬é’¥å’Œå‘é€çš„ç§é’¥è‡ªç„¶æ˜¯é…å¯¹çš„ã€‚ä½†æ˜¯å¦‚æœæ˜¯ å¤šç”¨æˆ· ï¼ˆA,Bï¼‰ï¼Œæˆ‘ä»¬åœ¨è¿æ¥åˆ°ç¬¬äºŒä¸ªå¸å·æ—¶ï¼ŒBä¿å­˜çš„æ˜¯è‡ªå·±çš„å…¬é’¥ï¼Œä½†æ˜¯SSHå®¢æˆ·ç«¯ä¾ç„¶å‘é€é»˜è®¤ç§é’¥ï¼Œå³Açš„ç§é’¥ï¼Œé‚£ä¹ˆè¿™ä¸ªéªŒè¯è‡ªç„¶æ— æ³•é€šè¿‡, æ‰€ä»¥éœ€è¦è®©SSHå®¢æˆ·ç«¯å‘ç°Bçš„ç§é’¥ã€‚

1. æŸ¥çœ‹ç³»ç»ŸSSH Key

		$ ssh-add -l
å¦‚æœæç¤ºï¼š

		$ Could not open a connection to your authentication agent.
å¯ä»¥è¾“å…¥å¦‚ä¸‹å‘½ä»¤ç„¶åé‡æ–°è¾“å…¥ï¼š**ssh-add -l**

		$ ssh-agent bash
> **ssh-agent bashå‘½ä»¤è§£é‡Šï¼š**
> ssh-agentæ˜¯ä¸“ä¸ºæ—¢ä»¤äººæ„‰å¿«åˆå®‰å…¨çš„å¤„ç†RSAå’ŒDSAå¯†é’¥è€Œè®¾è®¡çš„ç‰¹æ®Šç¨‹åºï¼Œä¸åŒäºsshï¼Œssh-agentæ˜¯ä¸ªé•¿æ—¶é—´æŒç»­è¿è¡Œçš„å®ˆæŠ¤è¿›ç¨‹ï¼ˆdaemonï¼‰ï¼Œè®¾è®¡å®ƒçš„å”¯ä¸€ç›®çš„å°±æ˜¯å¯¹è§£å¯†çš„ä¸“ç”¨å¯†é’¥è¿›è¡Œ**é«˜é€Ÿç¼“å­˜**ã€‚sshåŒ…å«çš„å†…å»ºæ”¯æŒå…è®¸å®ƒåŒssh-agenté€šä¿¡ï¼Œå…è®¸sshä¸å¿…æ¯æ¬¡æ–°è¿æ¥æ—¶éƒ½æç¤ºæ‚¨è¦å¯†ç æ‰èƒ½è·å–è§£å¯†çš„ä¸“ç”¨å¯†é’¥ã€‚å¯¹äºssh-agentï¼Œæ‚¨åªè¦ä½¿ç”¨ssh-addæŠŠä¸“ç”¨å¯†é’¥æ·»åŠ åˆ°ssh-agentçš„é«˜é€Ÿç¼“å­˜ä¸­ã€‚è¿™æ˜¯ä¸ªä¸€æ¬¡æ€§è¿‡ç¨‹ï¼›ç”¨è¿‡ssh-addä¹‹åï¼Œsshå°†ä»ssh-agentè·å–æ‚¨çš„ä¸“ç”¨å¯†é’¥ï¼Œè€Œä¸ä¼šæç¤ºè¦å¯†ç çŸ­è¯­æ¥çƒ¦æ‚¨äº†ã€‚
å¦‚æœå‡ºç°å¦‚ä¸‹æç¤ºä¿¡æ¯è¯´æ˜æ²¡æœ‰SSH Keyåœ¨ä»£ç†ä¸­

		$ The agent has no identities.
ä¸‹é¢å¯ä»¥æ‰‹åŠ¨åŠ å…¥SSH Key åˆ°ä»£ç†ä¸­ï¼š

		$ ssh-add ~/.ssh/id_rsa_company
å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤remove SSH Key

		$ ssh-add -D

2. é…ç½®config è·¯ç”±æ–‡ä»¶
configæ–‡ä»¶å³ç»‘å®šç§é’¥å’Œè¿œç¨‹æœåŠ¡å™¨çš„å…³ç³»ï¼Œä»¥æˆ‘çš„configæ–‡ä»¶ä¸ºä¾‹ï¼š

		# è¯¥æ–‡ä»¶ç”¨äºé…ç½®ç§é’¥å¯¹åº”çš„æœåŠ¡å™¨
		# é»˜è®¤è‡ªå·±GitHubçš„é…ç½®
		Host github
		 HostName github.com
		 User FraserYu
		 PreferredAuthentications publickey
		 IdentityFile ~/.ssh/id_rsa

		# å…¬å¸æ‰€ç”¨GitLabçš„é…ç½®
		Host gitlab
		 HostName gitlab.com #(å¯ä»¥æ˜¯åŸŸå/IPåœ°å€)
		 User Fraser
		 PreferredAuthentications publickey
		 IdentityFile ~/.ssh/id_rsa_company		 

3. æµ‹è¯•
è¾“å…¥å¦‚ä¸‹å‘½ä»¤è¿›è¡ŒGitLabå’ŒGitHubçš„æµ‹è¯•(æ³¨æ„å‘½ä»¤ä¸­ç”¨äº†Hostçš„åˆ«å)ï¼š

		$ ssh -T git@github
		$ ssh -T git@gitlab
		$ git clone git@github:username/project.git

4. ç”¨æˆ·åé‚®ç®±é…ç½®
Gitå…¨å±€é…ç½®å’Œå•ä¸ªä»“åº“çš„ç”¨æˆ·åé‚®ç®±é…ç½®ï¼Œå­¦ä¹ gitçš„æ—¶å€™, å¤§å®¶åˆšå¼€å§‹ä½¿ç”¨ä¹‹å‰éƒ½é…ç½®äº†ä¸€ä¸ªå…¨å±€çš„ç”¨æˆ·åå’Œé‚®ç®±

		$ git config --global user.name "github's Name"
		$ git config --global user.email "github@xx.com"
		$ git config --list
å¦‚æœä½ å…¬å¸çš„é¡¹ç›®æ˜¯æ”¾åœ¨è‡ªå»ºçš„gitlabä¸Šé¢, å¦‚æœä½ ä¸è¿›è¡Œé…ç½®ç”¨æˆ·åå’Œé‚®ç®±çš„è¯, åˆ™ä¼šä½¿ç”¨å…¨å±€çš„, è¿™ä¸ªæ—¶å€™æ˜¯é”™è¯¯çš„, æ­£ç¡®çš„åšæ³•æ˜¯é’ˆå¯¹å…¬å¸çš„é¡¹ç›®, åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿›è¡Œå•ç‹¬é…ç½®

		$ git config user.name "gitlab's Name"
		$ git config user.email "gitlab@xx.com"
		$ git config --list
 git config --listæŸ¥çœ‹å½“å‰é…ç½®, åœ¨å½“å‰é¡¹ç›®ä¸‹é¢æŸ¥çœ‹çš„é…ç½®æ˜¯å…¨å±€é…ç½®+å½“å‰é¡¹ç›®çš„é…ç½®, ä½¿ç”¨çš„æ—¶å€™ä¼šä¼˜å…ˆä½¿ç”¨å½“å‰é¡¹ç›®çš„é…ç½®

5. é™¤äº†é»˜è®¤çš„id_rsaæ˜¯è¢«gité»˜è®¤è¯»å–ï¼Œæˆ‘ä»¬æ¯æ¬¡æ‰“å¼€ç»ˆç«¯éƒ½éœ€è¦æ‰§è¡Œ **ssh-add ï½/.ssh/id_rsa_company**ï¼Œ è¿™æ ·ååˆ†éº»çƒ¦ï¼Œä»¥MacOsä¸ºğŸŒ°ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶æ·»åŠ åˆ° KeyChain Accessï¼Œ æ‰§è¡Œå‘½ä»¤ **ssh-add -K [path/to/your/ssh-key]**ï¼Œ  å¦‚ï¼šssh-add -K ï½/.ssh/id_rsa_company å³å¯
